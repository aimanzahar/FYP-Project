<script>
  const itemsPerPage = 15;
  let currentPage = 1;
  let gpus = [];

  function renderPagination(totalItems) {
    const totalPages = Math.ceil(totalItems / itemsPerPage);
    const container = document.getElementById('pagination-container');
    let paginationHTML = `<nav><ul class="pagination">`;

    for (let i = 1; i <= totalPages; i++) {
      paginationHTML += `
        <li class="page-item ${i === currentPage ? 'active' : ''}">
          <a class="page-link" href="#" data-page="${i}">${i}</a>
        </li>`;
    }

    paginationHTML += `</ul></nav>`;
    container.innerHTML = paginationHTML;

    document.querySelectorAll('.page-link').forEach(link => {
      link.addEventListener('click', (e) => {
        e.preventDefault();
        currentPage = parseInt(e.target.dataset.page);
        renderList();
        renderPagination(gpus.length);
      });
    });
  }

  function renderList() {
    const grid = document.getElementById('gpu-grid');
    grid.innerHTML = '';

    const start = (currentPage - 1) * itemsPerPage;
    const end = start + itemsPerPage;
    const pageItems = gpus.slice(start, end);

    pageItems.forEach(product => {
      const col = document.createElement('div');
      col.className = "custom-col mb-4 d-flex";

      col.innerHTML = `
        <div class="card shadow-sm w-100" style="min-width: 180px;">
          <img src="${product.image_url}" class="card-img-top p-3" alt="${product.name}" style="height: 140px; object-fit: contain;">
          <div class="card-body d-flex flex-column p-2">
            <h6 class="card-title mb-1" style="font-size: 0.85rem; min-height: 40px;">
              ${product.name}
            </h6>
            <p class="text-success fw-bold small mb-2">
              ${product.price ? `RM${parseFloat(product.price).toFixed(2)}` : 'N/A'}
            </p>
            <button class="btn btn-outline-primary btn-sm mt-auto add-button w-100">+ Add to build</button>
          </div>
        </div>
      `;

      col.querySelector('.add-button').addEventListener('click', () => {
        const gpu = {
          name: product.name,
          price: parseFloat(product.price),
          image_url: product.image_url
        };
        localStorage.setItem('selectedGPU', JSON.stringify(gpu));
        window.location.href = 'build.html';
      });

      grid.appendChild(col);
    });
  }